var totals = [
    {
        "days": 2848,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 2847,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 2428,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1462,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 567,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 366,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 366,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 365,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 365,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 365,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 356,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 256,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 232,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 214,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 159,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 159,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 125,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 123,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 92,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 87,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 70,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 52,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 50,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 50,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 50,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 44,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 44,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 43,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 42,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 40,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 32,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 32,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 31,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 31,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 31,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 31,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 31,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 31,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 31,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 31,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 31,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 31,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 30,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 30,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 29,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 29,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 28,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 21,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 18,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 17,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 17,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 16,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 15,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 15,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 15,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 15,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 15,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 15,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 14,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 13,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 11,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 11,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 11,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 10,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 10,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 10,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 8,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 8,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 8,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 8,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Assassination",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 7,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 6,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 6,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 6,
        "action": "Assassination",
        "all": 15352
  },
    {
        "days": 5,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 4,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 3,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 3,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 3,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 3,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 2,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 2,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 2,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Assassination",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Kidnap/Hostage",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Riot or Brawl",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Property Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Forming an Association",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Other Personal Attack",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Symbolic Act",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Verbal or Written Expression",
        "all": 15352
  },
    {
        "days": 1,
        "action": "Mass Demonstration or Strike",
        "all": 15352
  },
    {
        "days": 1,
        "action": "unknown",
        "all": 15352
  }
]

function ca() {

    totals_ = new Map()

    totals.forEach((d) => {
        if (totals_[d["action"]]) {
            totals_[d["action"]] += d.days;
        } else {
            totals_[d["action"]] = d.days;

        }
    })

    list = []
    for (var key in totals_) {
        list.push({
            action: key,
            days: totals_[key]
        });
    }

    list.sort((d1, d2) => d1.days - d2.days)
    totals = list;

    console.log(totals)

    var width = 180;
    var height = 180;
    var radius = Math.min(width, height) / 2;
    var donutWidth = 18;
    var color = d3.scaleOrdinal(["#9E0C3C", "#B01135", "#CD1B2D", "#E82322", "#FB291B", "#ff5555", "#ff8080", "#ffaaaa"]);

    var svg = d3.select('#donut3')
        .append('svg')
        .attr('width', width)
        .attr('height', height)
        .append('g')
        .attr('transform', 'translate(' + (width / 2) +
            ',' + (height / 2) + ')');

    var arc = d3.arc()
        .innerRadius(radius - donutWidth)
        .outerRadius(radius);

    var pie = d3.pie()
        .value(function (d) {
            return d.days;
        })
        .sort(null);

    var donutTip = d3.select("#donut3").append("div")
        .attr("class", "donut-tip")
        .style("color", "white")
        .style("opacity", 0)
        .style("position", "absolute")

    var path = svg.selectAll('path')
        .data(pie(totals))
        .enter()
        .append('path')
        .attr('d', arc)
        .attr('fill', function (d, i) {
            return color(d.data.action);
        })
        .attr('transform', 'translate(0, 0)')
        .on('mouseover', function (event, d) {

            console.log(this)

            /*  d3.select(this).transition()
      .attr('opacity', 0.5);
  donutTip.transition()
      .style("opacity", 1);*/
            svg.append("text")
                .attr("class", "donuttooltip")
                .text(d.data.days + " days")
                .attr("x", 0)
                .attr("y", 16)
                .style("font-size", 12)
                .style("fill", "white")
                .style("text-anchor", "middle")
                .style("alignment-baseline", "middle")

            /*           
                         donutTip
                             .html(d.data.days + " days")
                             .style("left", (this.getBBox().x + this.getBBox().width / 3 + width /2) + "px")
                             .style("top", (this.getBBox().y + this.getBBox().height / 3 + height/2) + "px");*/

        })
        .on('mouseout', function (event, d) {

            svg.selectAll(".donuttooltip").remove();

            /*d3.select(this).transition()
                .attr('opacity', 1);
                        donutTip.transition()
                            .style("opacity", 0);*/
        });



    var text = svg.append('text')
        .text('Canada')
        .attr("fill", "white") // set color
        .attr("class", "cname")
        .attr("x", 0)
        .attr("y", 0)
        .style("font-size", 18)
        .style("text-anchor", "middle")
        .style("alignment-baseline", "middle")

    console.log(text);

};

ca();
